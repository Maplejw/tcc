异常情况分析
1.2种情况全局事务状态可能为0以及对应的处理方式
a.当获取全局事务ID失败（可能生成了，但是服务器挂了）
-定时任务轮训全局事务表，轮训未发送的消息，如果有状态=0，通知各个业务进行cancel,各业务要注意空回滚
b.获取全局事务成功，然后执行各个业务逻辑一半，服务器挂了或者业务逻辑执行完毕但是通知的时候挂了，没通知成功
-定时任务轮训全局事务表，如果有状态=0，通过各个业务进行cancel

2.全局事务状态为确认或者取消的对应处理方式
a.通知成功，全局事务状态更改为确认或取消，消息未发送出去或者已发送，然后挂了
-全局事务表会有个是否发送消息的状态值，轮训未发送的消息，根据全局事务状态进行补发确认还是取消，针对已发送的，
各业务要注意幂等操作，防止二次确认或者二次取消

3.当轮训和通知（有可能程序处理的慢）同时过来时候，需要做到防止消息二次发送
a.通过update tcc_transcation set status=xxx where transcation_no=xxx and status=0的影响行数来做到防止消息二次发送


4.在业务逻辑处理库存、积分的时候，库存预处理完毕，然后程序阻塞了，可以用sleep(100秒)来模拟。这个时候预处理积分还未执行。
而TCC中心有个定时任务轮训全局事务表，发现这个事务到时间了还是初始化状态，就会通知参与者取消，库存系统会进行回滚操作。
但是这个时候积分库还未处理，会进行空回滚，而当100秒sleep结束后，会进行预处理积分，导致积分被扣，状态初始化，造成数据不一致。
a.各个业务也需要配置个定时任务轮训业务事务表，进行轮训回滚
b.不处理的话就是进行人工对账，当出现这个情况告知
c.通过业务确认方将事务隔离级别更改为READ_COMMITTED以及业务表需要对事务ID进行唯一索引创建。判断业务是否有这个事务ID，没有的话则写入。这个时候就看是业务先写进去还是通知先写进去这个事务ID，如果通知先写进去，业务则会抛唯一索引，自动会回滚。如果业务先写进去，则通知会捕获唯一索引，然后进行回滚操作。由于通知先查了未有数据，然后再写遇到业务先写进去，这个时候遇到唯一索引异常，通知再去查询如果不是
READ_COMMITTED事务隔离级别会查询不到数据，因此需要更改为READ_COMMITTED隔离级别，才能正常回滚数据。
-----------------------------------------------------

